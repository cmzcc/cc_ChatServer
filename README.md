# cc_ChatServer

基于cc_muduo网络库实现的高性能分布式聊天服务器，集成Redis缓存、Nginx负载均衡，实现了高并发、高可用的即时通讯系统。

## 项目介绍

本项目是一个基于C++开发的分布式聊天服务器系统，采用了Reactor模式的多线程网络库设计，支持上万用户同时在线聊天。系统架构包含聊天服务器集群、Redis消息缓存与用户信息存储、Nginx负载均衡等组件，实现了完整的即时通讯功能。

## 核心功能

- 用户注册、登录、查找好友、添加好友
- 创建群组、加入群组、群组聊天
- 点对点私聊、离线消息存储与转发
- 在线状态管理与实时更新
- 消息持久化存储

## 技术栈

- **C++11/14**：核心编程语言
- **cc_muduo**：自研网络库，基于Reactor模式实现高并发IO处理
- **Redis**：用于消息缓存、用户状态管理和离线消息存储
- **Nginx**：实现服务器集群的负载均衡
- **JSON/Protobuf**：消息序列化与反序列化
- **MySQL**：用户数据持久化存储
- **CMake**：跨平台构建系统

## 系统架构
                                ┌─────────────┐
                                │    Client   │
                                └──────┬──────┘
                                       │
                                ┌──────▼──────┐
                                │    Nginx    │
                                └──────┬──────┘
                                       │
         ┌───────────────┬─────────────┼─────────────┬───────────────┐
         │               │             │             │               │
  ┌──────▼──────┐ ┌──────▼──────┐ ┌────▼─────┐ ┌─────▼────┐  ┌──────▼──────┐
  │ ChatServer1 │ │ ChatServer2 │ │    ...   │ │ ServerN  │  │ ChatService │
  └──────┬──────┘ └──────┬──────┘ └────┬─────┘ └─────┬────┘  └──────┬──────┘
         │               │             │             │               │
         └───────────────┴─────────────┼─────────────┴───────────────┘
                                       │
                                ┌──────▼──────┐
                                │    Redis    │
                                └──────┬──────┘
                                       │
                                ┌──────▼──────┐
                                │    MySQL    │
                                └─────────────┘

## 项目亮点

- **高并发处理**：基于Reactor模式的多线程设计，单机支持万级并发连接
- **分布式架构**：多服务器集群部署，支持水平扩展
- **消息可靠性**：完善的离线消息存储与转发机制
- **高可用设计**：服务器宕机自动故障转移，用户无感知
- **自定义协议**：高效的二进制协议设计，优化网络传输效率
- **连接保活**：心跳机制确保连接状态实时监控

## 性能指标

- 单机并发连接：10,000+
- 消息吞吐量：5,000+ QPS
- 消息延迟：<50ms (99%)
- 服务可用性：99.9%

## 构建与运行

```bash
# 克隆项目
git clone https://github.com/cmzcc/cc_ChatServer.git
cd cc_ChatServer

sudo bash autobuild.sh

#注意nginx配置

cd bin
# 启动服务器
./ChatServer 127.0.0.1 6000
./ChatServer 127.0.0.1 6002
# 启动客户端
./ChatClient 127.0.0.1 8080
